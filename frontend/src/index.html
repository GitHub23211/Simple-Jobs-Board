<!DOCTYPE html>
<html>
    <head>
        <title>Bob's Jobs</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <link rel="stylesheet" type="text/css" href="style.css">   
        
        <!-- Include Handlebars from a CDN -->
        <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>

        <script src="main.js" type=module defer></script>
    </head>

    <body>
        <header class="page-header">
            <a href="/#" class="logo">Bob's Jobs</a>
            <div class="page-header-main ">
                <nav class="main-nav">
                    <ul class="main-menu">
                        <li><a href="/#">Home</a></li>
                        <li><a href="/#!/job">Jobs</a></li>
                        <li><a href="/#!/help">Applicant Help</a></li>
                        <li><a href="/#!/about">About Us</a></li>
                    </ul>
                </nav>
                                            
                <div class="header-search">
                    <form action="/search" role="search" class="search-form
                    search-widget" id="nav-main-search">
                    <label for="main-q" class="visually-hidden">Search Jobs</label>
                    <input id="main-q"  type="search" class="search-input-field"
                    name="q" placeholder="Site search..." value="">
                    <input type="submit" class="search-button" aria-label="Search"
                    value="Search"> 
                    </form>
                </div>
    
                <div class="header-auth">
                    <span>
                        <a href="/#!/login" id="login-link">Sign In</a> 
                        or
                        <a href="/#!/register" id="register-link">Register</a>
                    </span>
                </div>
            </div>
        </header>

        <div id='main'></div>
        </div>

    <!-- Handlebars templates -->
        <script id="text-template" type="text/x-handlebars-template">
            <p>{{text}}</p>
        </script>

        <script id="home-template" type="text/x-handlebars-template">
            <div class='joblist'>
                {{#eachJob job}}
                    <div class='job'>
                        <div id='jobtitle'><a href='/#!/jobs/{{id}}'> {{attributes.title}} </a></div>
                        <div id='location'> Location: {{attributes.location}} </div>
                        <div id='type'> Type: {{attributes.type}} </div>
                    </div>
                {{/eachJob}}
            </div>
        </script>

        <script id="job-template" type="text/x-handlebars-template">
            <div class='job-detailed'>
                <div id='jobtitle'>{{data.attributes.title}}</div>
                <div id='location'>Location: {{data.attributes.location}}</div>
                <div id='type'>Type: {{data.attributes.type}}</div>
                <div class='job-description'>{{{data.attributes.description}}}</div> 
                <div id='company'>Company: <a href='/#!/companies/{{data.attributes.company.data.id}}'>{{data.attributes.company.data.attributes.name}}</a></div>
            </div>
        </script>

        <script id="company-template" type="text/x-handlebars-template">
            <div class='company-description'>
                <div class='company-name'> {{data.attributes.name}} </div>
                {{#if data.attributes.logo}}
                <div class='company-logo'> <img src='{{data.attributes.logo}}' width=100 height=100 alt="{{data.attributes.name}}'s logo"> </div>
                {{/if}}
                {{#if data.attributes.url}}
                <div class='company-url'>Website: <a href='{{data.attributes.url}}'> {{data.attributes.url}} </a></div>
                {{/if}}
            </div>
            <div class='joblist'>
                {{#eachCompanyJob job companyID}}
                <div class='job'>
                    <div id='jobtitle'><a href='/#!/jobs/{{id}}'> {{attributes.title}} </a></div>
                    <div id='location'> Location: {{attributes.location}} </div>
                    <div id='type'> Type: {{attributes.type}} </div>
                </div>
                {{/eachCompanyJob}}
            </div>
        </script>

    </body>
</html>