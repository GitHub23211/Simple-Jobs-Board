<!--Joshua Santos
    45203083
    Index.html
    .html file that serves as the basis for the website.
    Credit to Steve Cassidy for the <header> and <footer> code of the body.
    Borrowed and modified from the html code given from Assignment 1.
-->

<!DOCTYPE html>
<html>
    <head>
        <title>Bob's Jobs</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <link rel="stylesheet" type="text/css" href="style.css">   
        
        <!-- Include Handlebars from a CDN -->
        <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>

        <script src="main.js" type=module defer></script>
    </head>

    <body>
        <header class="page-header">
            <a href="/#" class="logo">Bob's Jobs</a>
            <div class="page-header-main ">
                <nav class="main-nav">
                    <ul class="main-menu">
                        <li><a href="/#">Home</a></li>
                        <li><a href="/#!/job">Jobs</a></li>
                        <li><a href="/#!/help">Applicant Help</a></li>
                        <li><a href="/#!/about">About Us</a></li>
                    </ul>
                </nav>
                                            
                <div class="header-search">
                    <form id="search-form">  
                        <label for="search" id="search-label"> Search Jobs </label>
                        <input type='text' id="search" placeholder="Enter keywords..." value="">
                        <input type='submit' id="searchbutton" value="Search">
                    </form>
                </div>
    
                <div id="header-auth">
                </div>
            </div>
        </header>

        <div id='main'></div>
        </div>

        <footer id="footer">
            <p id="copyright">Copyright &copy; COMP2110 Web Designers, 2022.</p>
            <p id="attribution">Bob's Jobs is a service of Bob Bobalooba Enterprises.</p>
        </footer>

    <!-- Handlebars templates -->
        <script id="text-template" type="text/x-handlebars-template">
            <p>{{text}}</p>
        </script>

        <script id="home-template" type="text/x-handlebars-template">
            <div class='joblist'>
                {{#eachJob job}}
                    <div class='job'>
                        <div id='title'><a href='/#!/jobs/{{id}}' class="job-title" data-id="{{id}}"> {{attributes.title}} </a></div>
                        <div id='location'> Location: {{attributes.location}} </div>
                        <div id='type'> Type: {{attributes.type}} </div>
                    </div>
                {{/eachJob}}
            </div>
        </script>

        <script id="job-template" type="text/x-handlebars-template">
            <div class='job-detailed'>
                <div id='jobtitle'> {{job.attributes.title}} </div>
                <div id='location'> Location: {{job.attributes.location}} </div>
                <div id='type'> Type: {{job.attributes.type}} </div>
                <div id='company'>Company: <a href='/#!/companies/{{job.attributes.company.data.id}}'>{{job.attributes.company.data.attributes.name}} </a></div>
                {{#if user}}
                    <div id="apply-job">
                        <button id="apply-button">Apply for this Job</button>
                    </div>
                {{/if}}
                <div class='job-description'>{{{job.attributes.description}}}</div> 
            </div>
        </script>

        <script id="company-template" type="text/x-handlebars-template">
            <div class='company-description'>
                <div class='company-name'> {{data.attributes.name}} </div>
                {{#if data.attributes.logo}}
                <div class='company-logo'> <img src='{{data.attributes.logo}}' width=100 height=100 alt="{{data.attributes.name}}'s logo"> </div>
                {{/if}}
                {{#if data.attributes.url}}
                <div class='company-url'>Website: <a href='{{data.attributes.url}}'> {{data.attributes.url}} </a></div>
                {{/if}}
            </div>
            <div class='joblist'>
                {{#each job}}
                <div class='job'>
                    <div id='title'><a href='/#!/jobs/{{id}}' class="job-title" data-id="{{id}}"> {{attributes.title}} </a></div>
                    <div id='location'> Location: {{attributes.location}} </div>
                    <div id='type'> Type: {{attributes.type}} </div>
                </div>
                {{/each}}
            </div>
        </script>

        <script id="search-template" type="text/x-handlebars-template">
            {{#if job}}
                <div class="search-header">
                    <h1>"{{searchTerm}}" brought up {{numResults}} results</h1> 
                </div>
                <div class='joblist'>
                    {{#each job}}
                        <div class='job'>
                            <div id='title'><a href='/#!/jobs/{{id}}' class="job-title" data-id="{{id}}"> {{attributes.title}} </a></div>
                            <div id='location'> Location: {{attributes.location}} </div>
                            <div id='type'> Type: {{attributes.type}} </div>
                        </div>
                    {{/each}}
                </div>
            {{else}} 
            <div class="search-header">
                <h1>We couldn't find anything related to "{{searchTerm}}"</h1> 
                <p>Try:</p>
                <ul>
                    <li>Checking for spelling errors</li>
                </ul>
            </div>
            {{/if}}
        </script>

        <script id="login-template" type="text/x-handlebars-template">
            {{#if user}}
                <div id="logged-in">
                    Logged in as {{user.username}}
                    <button id="logoutbutton">Logout</button>
                </div>
            {{else}}
                <form id="login-form">
                    <label for="username" id="login-label"> Sign In </label>
                    <input type="text" id="username" name="username" value="">
                    <input type="password" id="password" name="password" value="">
                    <input type="submit" id="loginbutton" value="Login">
                </form> 
            {{/if}}
        </script>

        <script id="jobapp-template" type="text/x-handlebars-template">
            <form id="jobapp-form">
                <label for="text" id="jobapp-label">Application Details</label>
                <textarea id="text" name="text" required cols="100" placeholder="Write down why you want this job..." rows="20" value=""></textarea>
                <input type="submit" id="submitapp-button" value="Submit Application">
            </form> 
        </script>
    </body>

    <script id="invalid-login-template" type="text/x-handlebars-template">
        <div id="invalid-login">
            Invalid Username or Password
        </div>
    </script>

    <script id="applied-jobs-template" type="text/x-handlebars-template">
        <div id="applied-jobs">
            Jobs you've applied for
            <div class='joblist'>
                {{#each job}}
                    <div class='job'>
                        <div id='title'><a href='/#!/jobs/{{id}}' class="job-title" data-id="{{id}}"> {{attributes.job.data.attributes.title}} </a></div>
                        <div id='location'> Location: {{attributes.job.data.attributes.location}} </div>
                        <div id='type'> Type: {{attributes.job.data.attributes.type}} </div>
                    </div>
                {{/each}}
            </div>
        </div>
    </script>
</html>